<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>夜雨闻曦</title>
  
  <subtitle>个人博客</subtitle>
  <link href="http://yeyuwenxi.github.io/atom.xml" rel="self"/>
  
  <link href="http://yeyuwenxi.github.io/"/>
  <updated>2021-03-31T12:17:55.582Z</updated>
  <id>http://yeyuwenxi.github.io/</id>
  
  <author>
    <name>pcl</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>我做了那么多改变</title>
    <link href="http://yeyuwenxi.github.io/2021/03/31/wo-zuo-liao-na-me-duo-gai-bian/"/>
    <id>http://yeyuwenxi.github.io/2021/03/31/wo-zuo-liao-na-me-duo-gai-bian/</id>
    <published>2021-03-31T07:58:16.000Z</published>
    <updated>2021-03-31T12:17:55.582Z</updated>
    
    <content type="html"><![CDATA[<p>2021年3月31日，第3天。<br>“我做了那么多改变，只是为了我心中不变”<br>今天早上去上课的路上听到这句歌词时，突然之间就被打动了。<br>从小到大，我一直坚定不移地相信的一句话就是，人是会变的。<br>这么多年，我又何尝没有改变过，但无论再如何改变，总有些内在的东西是没有变的。<br>比如一些信念，一些梦想，那些潜藏在内心深处没有改变的，才是真的决定自己是谁的东西，而我们所有的改变，也只是为了守护内心深处那些柔软而坚定的东西。<br>一天宛如一年，一年宛如一天，任时光流转，我还是我。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;2021年3月31日，第3天。&lt;br&gt;“我做了那么多改变，只是为了我心中不变”&lt;br&gt;今天早上去上课的路上听到这句歌词时，突然之间就被打动了。&lt;br&gt;从小到大，我一直坚定不移地相信的一句话就是，人是会变的。&lt;br&gt;这么多年，我又何尝没有改变过，但无论再如何改变，总有些内在的</summary>
      
    
    
    
    <category term="心情日记" scheme="http://yeyuwenxi.github.io/categories/%E5%BF%83%E6%83%85%E6%97%A5%E8%AE%B0/"/>
    
    
  </entry>
  
  <entry>
    <title>谈谈熬夜</title>
    <link href="http://yeyuwenxi.github.io/2021/03/31/tan-tan-ao-ye/"/>
    <id>http://yeyuwenxi.github.io/2021/03/31/tan-tan-ao-ye/</id>
    <published>2021-03-31T07:49:21.000Z</published>
    <updated>2021-03-31T11:36:59.430Z</updated>
    
    <content type="html"><![CDATA[<p>2021年3月30日，第二天。<br>今天想聊一聊熬夜这个话题。<br>上大学以来，自己好像就养成了熬夜习惯，尤其是大三以来，每天睡得比之前晚了好多，天天都要到12点之后才会睡觉，就算这样，每天睡前在床上还会玩好久的手机。<br>网上睡得晚，第二天难免没什么精力，早上又起的迟，第二天晚上该睡的时候还不困，不可避免地陷入了恶心循环。</p><p><strong>当我熬夜的时候我在干什么？</strong><br>玩手机…<br>好像又回到昨天的那个话题了<a href="http://yeyuwenxi.github.io/2021/03/30/dang-wo-kan-shou-ji-de-shi-hou-wo-zai-kan-xie-shi-me/">当我看手机时我在看什么</a><br>说白了，熬夜的时候自己也没做什么正经事情，自己也从来都不是一个喜欢在夜晚工作的人，每天熬夜的原因只有一个–玩！<br>晚上躺在床上说着拿起手机只看一会儿，但每次一看就不知道要到几点钟，最后不知不觉就又熬了个大夜。<br><strong>熬夜真的快乐吗</strong><br>一时熬夜一时爽，一直熬夜一直爽。<br>熬夜的快感是即时的，一旦沉浸于其中就难以自拔，但熬夜之后呢？第二天昏昏沉沉，做什么事情都没有精神，起得又晚，很多时候一个大早上就没了。<br>熬夜只是一时的快乐，摧残的确实长久的身心，严重地扰乱着自己的生活。<br><strong>到底为什么熬夜</strong></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;2021年3月30日，第二天。&lt;br&gt;今天想聊一聊熬夜这个话题。&lt;br&gt;上大学以来，自己好像就养成了熬夜习惯，尤其是大三以来，每天睡得比之前晚了好多，天天都要到12点之后才会睡觉，就算这样，每天睡前在床上还会玩好久的手机。&lt;br&gt;网上睡得晚，第二天难免没什么精力，早上又起的</summary>
      
    
    
    
    <category term="心情日记" scheme="http://yeyuwenxi.github.io/categories/%E5%BF%83%E6%83%85%E6%97%A5%E8%AE%B0/"/>
    
    
  </entry>
  
  <entry>
    <title>Android实例之必应每日一图</title>
    <link href="http://yeyuwenxi.github.io/2021/03/30/android-shi-li-zhi-bi-ying-mei-ri-yi-tu/"/>
    <id>http://yeyuwenxi.github.io/2021/03/30/android-shi-li-zhi-bi-ying-mei-ri-yi-tu/</id>
    <published>2021-03-30T14:31:24.000Z</published>
    <updated>2021-03-30T14:32:31.651Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Android实现每天更新一张图片"><a href="#Android实现每天更新一张图片" class="headerlink" title="Android实现每天更新一张图片"></a>Android实现每天更新一张图片</h2><p>第一次写博客，记录一下自己学习android过程中做过的一些实例。</p><p>必应官网每天都会更新一张图片，我们可以通过这张图片的链接来获取这张图片，并让其显示在android app中。</p><h3 id="一、图片的获取"><a href="#一、图片的获取" class="headerlink" title="一、图片的获取"></a>一、图片的获取</h3><p>必应提供了一个图片的接口，我们可以通过访问这个接口来获取每日更新的图片，接口链接如下所示：<code>https://cn.bing.com/HPImageArchive.aspx?format=js&amp;idx=0&amp;n=1</code><br>通过浏览器访问该链接可以得到以下所示数据</p><blockquote><p>{“images”:[{“startdate”:”20210124”,”fullstartdate”:”202101241600”,”enddate”:”20210125”,<strong>“url”:”/th?id=OHR.ChurchRock_ZH-CN6926315999_1920x1080.jpg&amp;rf=LaDigue_1920x1080.jpg&amp;pid=hp”</strong>,”urlbase”:”/th?id=OHR.ChurchRock_ZH-CN6926315999”,”copyright”:”红石公园教堂岩附近的雷击，新墨西哥州 (© Tim Fitzharris/Minden Pictures)”,”copyrightlink”:”<a href="https://www.bing.com/search?q=%E7%BA%A2%E7%9F%B3%E5%85%AC%E5%9B%AD%E6%95%99%E5%A0%82&amp;form=hpcapt&amp;mkt=zh-cn&quot;,&quot;title&quot;:&quot;&quot;,&quot;quiz&quot;:&quot;/search?q=Bing+homepage+quiz&amp;filters=WQOskey:%22HPQuiz_20210124_ChurchRock%22&amp;FORM=HPQUIZ&quot;,&quot;wp&quot;:true,&quot;hsh&quot;:&quot;cdae6c57dbb4fe473dfd4f93b7870b8b&quot;,&quot;drk&quot;:1,&quot;top&quot;:1,&quot;bot&quot;:1,&quot;hs&quot;:%5B%5D%7D%5D,&quot;tooltips&quot;:%7B&quot;loading&quot;:&quot;%E6%AD%A3%E5%9C%A8%E5%8A%A0%E8%BD%BD...&quot;,&quot;previous&quot;:&quot;%E4%B8%8A%E4%B8%80%E4%B8%AA%E5%9B%BE%E5%83%8F&quot;,&quot;next&quot;:&quot;%E4%B8%8B%E4%B8%80%E4%B8%AA%E5%9B%BE%E5%83%8F&quot;,&quot;walle&quot;:&quot;%E6%AD%A4%E5%9B%BE%E7%89%87%E4%B8%8D%E8%83%BD%E4%B8%8B%E8%BD%BD%E7%94%A8%E4%BD%9C%E5%A3%81%E7%BA%B8%E3%80%82&quot;,&quot;walls&quot;:&quot;%E4%B8%8B%E8%BD%BD%E4%BB%8A%E6%97%A5%E7%BE%8E%E5%9B%BE%E3%80%82%E4%BB%85%E9%99%90%E7%94%A8%E4%BD%9C%E6%A1%8C%E9%9D%A2%E5%A3%81%E7%BA%B8%E3%80%82&quot;%7D%7D">https://www.bing.com/search?q=%E7%BA%A2%E7%9F%B3%E5%85%AC%E5%9B%AD%E6%95%99%E5%A0%82&amp;form=hpcapt&amp;mkt=zh-cn&quot;,&quot;title&quot;:&quot;&quot;,&quot;quiz&quot;:&quot;/search?q=Bing+homepage+quiz&amp;filters=WQOskey:%22HPQuiz_20210124_ChurchRock%22&amp;FORM=HPQUIZ&quot;,&quot;wp&quot;:true,&quot;hsh&quot;:&quot;cdae6c57dbb4fe473dfd4f93b7870b8b&quot;,&quot;drk&quot;:1,&quot;top&quot;:1,&quot;bot&quot;:1,&quot;hs&quot;:[]}],&quot;tooltips&quot;:{&quot;loading&quot;:&quot;正在加载...&quot;,&quot;previous&quot;:&quot;上一个图像&quot;,&quot;next&quot;:&quot;下一个图像&quot;,&quot;walle&quot;:&quot;此图片不能下载用作壁纸。&quot;,&quot;walls&quot;:&quot;下载今日美图。仅限用作桌面壁纸。&quot;}}</a></p></blockquote><p>其中，url标签后的内容即为我们所需图片的地址，通过访问<code>http://cn.bing.com+该地址</code>就可以得到我们想要的图片，例如，上面得到的url为<br><code> /th?id=OHR.ChurchRock_ZH-CN6926315999_1920x1080.jpg&amp;rf=LaDigue_1920x1080.jpg&amp;pid=hp</code><br>那我们访问</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="comment">//cn.bing.com/th?id=OHR.ChurchRock_ZH-CN6926315999_1920x1080.jpg&amp;rf=LaDigue_1920x1080.jpg&amp;pid=hp</span></span><br></pre></td></tr></table></figure><p>就可以得到我们想要的图片。</p><h3 id="二、在android上获取并显示图片"><a href="#二、在android上获取并显示图片" class="headerlink" title="二、在android上获取并显示图片"></a>二、在android上获取并显示图片</h3><p>由于android自身的限制，网络操作只能在子线程中完成，这一点是我们写代码中特别需要注意的。因此我们要把访问api接口的代码写在子线程中。此外，在android中，与UI有关的操作只能在主线程或UI线程中完成，所以我们加载图片上要记得更换线程。</p><h4 id="1-访问api接口"><a href="#1-访问api接口" class="headerlink" title="1.访问api接口"></a>1.访问api接口</h4><p>这里我们通过android自带的httpurlconnection来访问，并将访问得到的json返回文件存储到字符串response中。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">sendRequestWithHttpURLConnection</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 开启线程来发起网络请求</span></span><br><span class="line">        <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                HttpURLConnection connection = <span class="keyword">null</span>;</span><br><span class="line">                BufferedReader reader = <span class="keyword">null</span>;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    URL url = <span class="keyword">new</span> URL(<span class="string">&quot;https://cn.bing.com/HPImageArchive.aspx?format=js&amp;idx=0&amp;n=1&quot;</span>);</span><br><span class="line">                    connection = (HttpURLConnection) url.openConnection();</span><br><span class="line">                    connection.setRequestMethod(<span class="string">&quot;GET&quot;</span>);</span><br><span class="line">                    connection.setConnectTimeout(<span class="number">8000</span>);</span><br><span class="line">                    connection.setReadTimeout(<span class="number">8000</span>);</span><br><span class="line">                    InputStream in = connection.getInputStream();</span><br><span class="line">                    <span class="comment">// 下面对获取到的输入流进行读取</span></span><br><span class="line">                    reader = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(in));</span><br><span class="line">                    StringBuilder response = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">                    String line;</span><br><span class="line">                    <span class="keyword">while</span> ((line = reader.readLine()) != <span class="keyword">null</span>) &#123;</span><br><span class="line">                        response.append(line);</span><br><span class="line">                    &#125;</span><br><span class="line">                    parseJSONWithJSONObject(response.toString());</span><br><span class="line">                   <span class="comment">// showResponse(response.toString());</span></span><br><span class="line">                    <span class="comment">//Ui线程</span></span><br><span class="line">                &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">                    <span class="keyword">if</span> (reader != <span class="keyword">null</span>) &#123;</span><br><span class="line">                        <span class="keyword">try</span> &#123;</span><br><span class="line">                            reader.close();</span><br><span class="line">                        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                            e.printStackTrace();</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span> (connection != <span class="keyword">null</span>) &#123;</span><br><span class="line">                        connection.disconnect();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).start();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h4 id="2-json的解析"><a href="#2-json的解析" class="headerlink" title="2.json的解析"></a>2.json的解析</h4><p>这里我们直接通过android自带的JSONArray和JSONObject来进行json的解析，并将解析到的结果和<code>http://cn.bing.com</code>拼接起来，得到我们想要的图片的链接，并将其存储在字符串url1中。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">parseJSONWithJSONObject</span><span class="params">(String jsonData)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">           <span class="comment">// JSONArray jsonArray = new JSONArray(jsonData);</span></span><br><span class="line"></span><br><span class="line">            JSONArray jsonArray = <span class="keyword">new</span> JSONObject(jsonData).getJSONArray(<span class="string">&quot;images&quot;</span>);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; jsonArray.length(); i++) &#123;</span><br><span class="line">                JSONObject jsonObject = jsonArray.getJSONObject(i);</span><br><span class="line">                String url = jsonObject.getString(<span class="string">&quot;url&quot;</span>);</span><br><span class="line"></span><br><span class="line">                Log.d(<span class="string">&quot;MainActivity&quot;</span>, <span class="string">&quot;url is &quot;</span> + url);</span><br><span class="line">String url1=<span class="string">&quot;http://cn.bing.com&quot;</span>+url;</span><br><span class="line">                showResponse(url1);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h4 id="3-图片的加载"><a href="#3-图片的加载" class="headerlink" title="3.图片的加载"></a>3.图片的加载</h4><p>利用开源框架Glide进行图片的加载。<br>注意，图片的加载要写在UI线程中。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">showResponse</span><span class="params">(<span class="keyword">final</span> String response)</span> </span>&#123;</span><br><span class="line">        runOnUiThread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="comment">// 在这里进行UI操作，将结果显示到界面上</span></span><br><span class="line">                Glide.with(MainActivity.<span class="keyword">this</span>).load(response).into(img);</span><br><span class="line">              <span class="comment">//  text.setText(response);</span></span><br><span class="line">                Log.i(<span class="string">&quot;123&quot;</span>,response);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="三、演示效果"><a href="#三、演示效果" class="headerlink" title="三、演示效果"></a>三、演示效果</h3><p>![-w40](<a href="https://img-blog.csdnimg.cn/20210125151637243.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2NoZW54aWhhbmh1aQ==,color_FFFFFF,t_70">https://img-blog.csdnimg.cn/20210125151637243.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2NoZW54aWhhbmh1aQ==,color_FFFFFF,t_70</a> =400x800)</p><h3 id="四、源代码"><a href="#四、源代码" class="headerlink" title="四、源代码"></a>四、源代码</h3><p><strong>1.xml</strong></p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span><br><span class="line">&lt;LinearLayout xmlns:android=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span><br><span class="line">    xmlns:app=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span><br><span class="line">    xmlns:tools=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span><br><span class="line">    android:orientation=<span class="string">&quot;vertical&quot;</span></span><br><span class="line">    android:layout_width=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">    android:layout_height=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">    tools:context=<span class="string">&quot;.MainActivity&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;ImageView</span><br><span class="line">    android:id=<span class="string">&quot;@+id/img&quot;</span></span><br><span class="line">    android:layout_width=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">    android:layout_height=<span class="string">&quot;match_parent&quot;</span>/&gt;</span><br><span class="line"></span><br><span class="line">&lt;/LinearLayout&gt;</span><br></pre></td></tr></table></figure><p>这部分代码比较简单，就是线性布局中加了一个imageview.</p><p><strong>2.activity</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</span><br><span class="line">    TextView text;</span><br><span class="line">    ImageView img;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line">        <span class="comment">// text=findViewById(R.id.text);</span></span><br><span class="line">       img=findViewById(R.id.img);</span><br><span class="line">        sendRequestWithHttpURLConnection();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">sendRequestWithHttpURLConnection</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 开启线程来发起网络请求</span></span><br><span class="line">        <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                HttpURLConnection connection = <span class="keyword">null</span>;</span><br><span class="line">                BufferedReader reader = <span class="keyword">null</span>;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    URL url = <span class="keyword">new</span> URL(<span class="string">&quot;https://cn.bing.com/HPImageArchive.aspx?format=js&amp;idx=0&amp;n=1&quot;</span>);</span><br><span class="line">                    connection = (HttpURLConnection) url.openConnection();</span><br><span class="line">                    connection.setRequestMethod(<span class="string">&quot;GET&quot;</span>);</span><br><span class="line">                    connection.setConnectTimeout(<span class="number">8000</span>);</span><br><span class="line">                    connection.setReadTimeout(<span class="number">8000</span>);</span><br><span class="line">                    InputStream in = connection.getInputStream();</span><br><span class="line">                    <span class="comment">// 下面对获取到的输入流进行读取</span></span><br><span class="line">                    reader = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(in));</span><br><span class="line">                    StringBuilder response = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">                    String line;</span><br><span class="line">                    <span class="keyword">while</span> ((line = reader.readLine()) != <span class="keyword">null</span>) &#123;</span><br><span class="line">                        response.append(line);</span><br><span class="line">                    &#125;</span><br><span class="line">                    parseJSONWithJSONObject(response.toString());</span><br><span class="line">                   <span class="comment">// showResponse(response.toString());</span></span><br><span class="line">                    <span class="comment">//Ui线程</span></span><br><span class="line">                &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">                    <span class="keyword">if</span> (reader != <span class="keyword">null</span>) &#123;</span><br><span class="line">                        <span class="keyword">try</span> &#123;</span><br><span class="line">                            reader.close();</span><br><span class="line">                        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                            e.printStackTrace();</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span> (connection != <span class="keyword">null</span>) &#123;</span><br><span class="line">                        connection.disconnect();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).start();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">showResponse</span><span class="params">(<span class="keyword">final</span> String response)</span> </span>&#123;</span><br><span class="line">        runOnUiThread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="comment">// 在这里进行UI操作，将结果显示到界面上</span></span><br><span class="line">                Glide.with(MainActivity.<span class="keyword">this</span>).load(response).into(img);</span><br><span class="line">              <span class="comment">//  text.setText(response);</span></span><br><span class="line">                Log.i(<span class="string">&quot;123&quot;</span>,response);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">parseJSONWithJSONObject</span><span class="params">(String jsonData)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">           <span class="comment">// JSONArray jsonArray = new JSONArray(jsonData);</span></span><br><span class="line"></span><br><span class="line">            JSONArray jsonArray = <span class="keyword">new</span> JSONObject(jsonData).getJSONArray(<span class="string">&quot;images&quot;</span>);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; jsonArray.length(); i++) &#123;</span><br><span class="line">                JSONObject jsonObject = jsonArray.getJSONObject(i);</span><br><span class="line">                String url = jsonObject.getString(<span class="string">&quot;url&quot;</span>);</span><br><span class="line"></span><br><span class="line">                Log.d(<span class="string">&quot;MainActivity&quot;</span>, <span class="string">&quot;url is &quot;</span> + url);</span><br><span class="line">String url1=<span class="string">&quot;http://cn.bing.com&quot;</span>+url;</span><br><span class="line">                showResponse(url1);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;Android实现每天更新一张图片&quot;&gt;&lt;a href=&quot;#Android实现每天更新一张图片&quot; class=&quot;headerlink&quot; title=&quot;Android实现每天更新一张图片&quot;&gt;&lt;/a&gt;Android实现每天更新一张图片&lt;/h2&gt;&lt;p&gt;第一次写博客，记录一</summary>
      
    
    
    
    <category term="Android" scheme="http://yeyuwenxi.github.io/categories/Android/"/>
    
    
  </entry>
  
  <entry>
    <title>Android实现TCP客户端</title>
    <link href="http://yeyuwenxi.github.io/2021/03/30/android-shi-xian-tcp-ke-hu-duan/"/>
    <id>http://yeyuwenxi.github.io/2021/03/30/android-shi-xian-tcp-ke-hu-duan/</id>
    <published>2021-03-30T14:27:02.000Z</published>
    <updated>2021-03-30T14:30:14.705Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1-添加相关权限，使得android-app可以访问网络"><a href="#1-添加相关权限，使得android-app可以访问网络" class="headerlink" title="1.添加相关权限，使得android app可以访问网络"></a>1.添加相关权限，使得android app可以访问网络</h2><p>在AndroidManiffest.xml中添加</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;uses-permission android:name=<span class="string">&quot;android.permission.INTERNET&quot;</span>/&gt;</span><br></pre></td></tr></table></figure><h2 id="2-socket的连接"><a href="#2-socket的连接" class="headerlink" title="2.socket的连接"></a>2.socket的连接</h2><p>由于android平台的限制，与网络相关的操作只能在子线程中进行，所以这里我们单独建立一个线程用于socket的连接</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">//子线程中进行网络相关操作</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">connectthread</span> <span class="keyword">extends</span> <span class="title">Thread</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        OutputStream outputStream=<span class="keyword">null</span>;</span><br><span class="line">        InputStream inputStream=<span class="keyword">null</span>;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//连接</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                socket=<span class="keyword">new</span> Socket(a, b);</span><br><span class="line">                runOnUiThread(<span class="keyword">new</span> Runnable()<span class="comment">//不允许其他线程直接操作组件，用提供的此方法可以</span></span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span></span><br><span class="line"><span class="function">                    </span>&#123;</span><br><span class="line">                        <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">                        Toast.makeText(MainActivity.<span class="keyword">this</span>,<span class="string">&quot;连接成功&quot;</span>,Toast.LENGTH_SHORT).show();</span><br><span class="line"></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (UnknownHostException e) &#123;</span><br><span class="line">                <span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">                runOnUiThread(<span class="keyword">new</span> Runnable()<span class="comment">//不允许其他线程直接操作组件，用提供的此方法可以</span></span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span></span><br><span class="line"><span class="function">                    </span>&#123;</span><br><span class="line">                        <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">                        Toast.makeText(MainActivity.<span class="keyword">this</span>,<span class="string">&quot;连接失败&quot;</span>,Toast.LENGTH_SHORT).show();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;<span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">                runOnUiThread(<span class="keyword">new</span> Runnable()<span class="comment">//不允许其他线程直接操作组件，用提供的此方法可以</span></span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span></span><br><span class="line"><span class="function">                    </span>&#123;</span><br><span class="line">                        <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">                        Toast.makeText(MainActivity.<span class="keyword">this</span>,<span class="string">&quot;连接失败&quot;</span>,Toast.LENGTH_SHORT).show();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>socket=new socket(a,b)这一方法可以建立一个tcp连接,其中，a为ip地址，b为端口号<br>如果连接成功，我们及通过Toast在屏幕中显示“连接成功”，若连接失败，则会转到异常中，我们通过Toast显示“连接失败”。</p><h2 id="3-通过输出流发送消息"><a href="#3-通过输出流发送消息" class="headerlink" title="3.通过输出流发送消息"></a>3.通过输出流发送消息</h2><p>在子线程中添加以下代码，获取socket的输出流对象<br>并通过输出流对象的write()方法向服务器发送“123”</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">               outputStream=socket.getOutputStream();</span><br><span class="line">               outputStream.write(<span class="number">123</span>);</span><br><span class="line">           &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">               e.printStackTrace();</span><br><span class="line">           &#125;</span><br></pre></td></tr></table></figure><p>以上就是最简单的消息发送，下面我们通过edittext获取输入的内容，并将输入的内容发送给服务器</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//发送</span></span><br><span class="line">      send.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</span><br><span class="line">          <span class="meta">@Override</span></span><br><span class="line">          <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line">              <span class="comment">//子线程中进行网络操作</span></span><br><span class="line">  <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">      <span class="meta">@Override</span></span><br><span class="line">      <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">          <span class="keyword">if</span>(socket!=<span class="keyword">null</span>)&#123;</span><br><span class="line">          <span class="keyword">try</span> &#123;</span><br><span class="line">              String text=out.getText().toString();</span><br><span class="line">              lianjie.outputStream.write(text.getBytes());</span><br><span class="line">          &#125; <span class="keyword">catch</span> (UnknownHostException e) &#123;</span><br><span class="line">              <span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">              e.printStackTrace();</span><br><span class="line"></span><br><span class="line">          &#125;<span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">              e.printStackTrace();</span><br><span class="line">          &#125;&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">              runOnUiThread(<span class="keyword">new</span> Runnable()<span class="comment">//不允许其他线程直接操作组件，用提供的此方法可以</span></span><br><span class="line">              &#123;</span><br><span class="line">                  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span></span><br><span class="line"><span class="function">                  </span>&#123;</span><br><span class="line">                      <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">                      Toast.makeText(MainActivity.<span class="keyword">this</span>,<span class="string">&quot;请先建立连接&quot;</span>,Toast.LENGTH_SHORT).show();</span><br><span class="line">                  &#125;</span><br><span class="line">              &#125;);</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;).start();</span><br><span class="line"></span><br><span class="line">          &#125;</span><br><span class="line">      &#125;);</span><br></pre></td></tr></table></figure><p>需要注意的是，发送的操作需要在子线程中进行，所以这里我又建立了一个线程来进行发送的操作，在线程中获取socket的输出流对象即可进行内容的发送。<br>在这里我加了一个提示信息，如果socket为空的话，则提示“请先建立连接”。</p><h2 id="4-通过输入流获取消息"><a href="#4-通过输入流获取消息" class="headerlink" title="4.通过输入流获取消息"></a>4.通过输入流获取消息</h2><p>在子线程中建立一个死循环，时刻监听输入流，读取服务器发送来的消息</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line">               <span class="keyword">while</span> (<span class="keyword">true</span>)</span><br><span class="line">               &#123;</span><br><span class="line">                   <span class="keyword">final</span> <span class="keyword">byte</span>[] buffer = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];<span class="comment">//创建接收缓冲区</span></span><br><span class="line">                   inputStream = socket.getInputStream();</span><br><span class="line">                   <span class="keyword">final</span> <span class="keyword">int</span> len = inputStream.read(buffer);<span class="comment">//数据读出来，并且返回数据的长度</span></span><br><span class="line">                   runOnUiThread(<span class="keyword">new</span> Runnable()<span class="comment">//不允许其他线程直接操作组件，用提供的此方法可以</span></span><br><span class="line">                   &#123;</span><br><span class="line">                       <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span></span><br><span class="line"><span class="function">                       </span>&#123;</span><br><span class="line">                           <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">                           receive.append(<span class="keyword">new</span> String(buffer,<span class="number">0</span>,len)+<span class="string">&quot;\r\n&quot;</span>);</span><br><span class="line">                       &#125;</span><br><span class="line">                   &#125;);</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;</span><br><span class="line">           <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line"></span><br><span class="line">       &#125;</span><br></pre></td></tr></table></figure><h2 id="5-测试结果"><a href="#5-测试结果" class="headerlink" title="5.测试结果"></a>5.测试结果</h2><p>客户端<br><img src="https://img-blog.csdnimg.cn/20210321163105573.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2NoZW54aWhhbmh1aQ==,size_10,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br>服务器<br><img src="https://img-blog.csdnimg.cn/202103211631546.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2NoZW54aWhhbmh1aQ==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br>经过测试，服务器和客户端之间可以正常的发送和接收信息。</p><h2 id="6-源代码"><a href="#6-源代码" class="headerlink" title="6.源代码"></a>6.源代码</h2><p>xml</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span><br><span class="line">&lt;LinearLayout xmlns:android=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span><br><span class="line">    xmlns:app=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span><br><span class="line">    xmlns:tools=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span><br><span class="line">    android:layout_width=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">    android:layout_height=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">    android:orientation=<span class="string">&quot;vertical&quot;</span></span><br><span class="line">    tools:context=<span class="string">&quot;.MainActivity&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">    &lt;EditText</span><br><span class="line">        android:id=<span class="string">&quot;@+id/ip&quot;</span></span><br><span class="line">        android:layout_width=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">        android:layout_height=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">        android:hint=<span class="string">&quot;ip&quot;</span></span><br><span class="line">        /&gt;</span><br><span class="line">    &lt;EditText</span><br><span class="line">        android:id=<span class="string">&quot;@+id/port&quot;</span></span><br><span class="line">        android:layout_width=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">        android:layout_height=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">        android:hint=<span class="string">&quot;port&quot;</span></span><br><span class="line">        /&gt;</span><br><span class="line">    &lt;EditText</span><br><span class="line">        android:id=<span class="string">&quot;@+id/out&quot;</span></span><br><span class="line">        android:layout_width=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">        android:layout_height=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">        android:hint=<span class="string">&quot;请输入要发送的内容&quot;</span></span><br><span class="line">        /&gt;</span><br><span class="line">    &lt;Button</span><br><span class="line">        android:id=<span class="string">&quot;@+id/connect&quot;</span></span><br><span class="line">        android:layout_width=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">        android:layout_height=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">        android:text=<span class="string">&quot;连接&quot;</span>/&gt;</span><br><span class="line">    &lt;Button</span><br><span class="line">        android:id=<span class="string">&quot;@+id/send&quot;</span></span><br><span class="line">        android:layout_width=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">        android:layout_height=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">        android:text=<span class="string">&quot;发送&quot;</span>/&gt;</span><br><span class="line">    &lt;TextView</span><br><span class="line">        android:id=<span class="string">&quot;@+id/receive&quot;</span></span><br><span class="line">        android:layout_width=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">        android:layout_height=<span class="string">&quot;wrap_content&quot;</span>/&gt;</span><br><span class="line"></span><br><span class="line">&lt;/LinearLayout&gt;</span><br></pre></td></tr></table></figure><p>Mainactivity</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</span><br><span class="line">    String a;</span><br><span class="line">    <span class="keyword">int</span> b;</span><br><span class="line">    connectthread lianjie;</span><br><span class="line">    TextView receive;</span><br><span class="line">    Socket socket=<span class="keyword">null</span>;</span><br><span class="line">    Button connect;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line">        EditText ip=findViewById(R.id.ip);</span><br><span class="line">        EditText port=findViewById(R.id.port);</span><br><span class="line">        EditText out=findViewById(R.id.out);</span><br><span class="line">         receive=findViewById(R.id.receive);</span><br><span class="line">         connect=findViewById(R.id.connect);</span><br><span class="line">        Button send=findViewById(R.id.send);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        connect.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line">                a=ip.getText().toString();</span><br><span class="line">                String c=port.getText().toString();</span><br><span class="line">                <span class="keyword">if</span>(<span class="string">&quot;&quot;</span>.equals(a)||<span class="string">&quot;&quot;</span>.equals(c))&#123;</span><br><span class="line">                    Toast.makeText(MainActivity.<span class="keyword">this</span>,<span class="string">&quot;请输入ip和端口号&quot;</span>,Toast.LENGTH_SHORT).show();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span>&#123;b=Integer.valueOf(c);</span><br><span class="line">                 lianjie=<span class="keyword">new</span> connectthread();</span><br><span class="line">                lianjie.start();&#125;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//发送</span></span><br><span class="line">        send.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line">                <span class="comment">//子线程中进行网络操作</span></span><br><span class="line">    <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(socket!=<span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                String text=out.getText().toString();</span><br><span class="line">                lianjie.outputStream.write(text.getBytes());</span><br><span class="line">            &#125; <span class="keyword">catch</span> (UnknownHostException e) &#123;</span><br><span class="line">                <span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">                e.printStackTrace();</span><br><span class="line"></span><br><span class="line">            &#125;<span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                runOnUiThread(<span class="keyword">new</span> Runnable()<span class="comment">//不允许其他线程直接操作组件，用提供的此方法可以</span></span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span></span><br><span class="line"><span class="function">                    </span>&#123;</span><br><span class="line">                        <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">                        Toast.makeText(MainActivity.<span class="keyword">this</span>,<span class="string">&quot;请先建立连接&quot;</span>,Toast.LENGTH_SHORT).show();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;).start();</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//子线程中进行网络相关操作</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">connectthread</span> <span class="keyword">extends</span> <span class="title">Thread</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        OutputStream outputStream=<span class="keyword">null</span>;</span><br><span class="line">        InputStream inputStream=<span class="keyword">null</span>;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//连接</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                socket=<span class="keyword">new</span> Socket(a, b);</span><br><span class="line">                runOnUiThread(<span class="keyword">new</span> Runnable()<span class="comment">//不允许其他线程直接操作组件，用提供的此方法可以</span></span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span></span><br><span class="line"><span class="function">                    </span>&#123;</span><br><span class="line">                        <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">                        Toast.makeText(MainActivity.<span class="keyword">this</span>,<span class="string">&quot;连接成功&quot;</span>,Toast.LENGTH_SHORT).show();</span><br><span class="line"></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (UnknownHostException e) &#123;</span><br><span class="line">                <span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">                runOnUiThread(<span class="keyword">new</span> Runnable()<span class="comment">//不允许其他线程直接操作组件，用提供的此方法可以</span></span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span></span><br><span class="line"><span class="function">                    </span>&#123;</span><br><span class="line">                        <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">                        Toast.makeText(MainActivity.<span class="keyword">this</span>,<span class="string">&quot;连接失败&quot;</span>,Toast.LENGTH_SHORT).show();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;<span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">                runOnUiThread(<span class="keyword">new</span> Runnable()<span class="comment">//不允许其他线程直接操作组件，用提供的此方法可以</span></span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span></span><br><span class="line"><span class="function">                    </span>&#123;</span><br><span class="line">                        <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">                        Toast.makeText(MainActivity.<span class="keyword">this</span>,<span class="string">&quot;连接失败&quot;</span>,Toast.LENGTH_SHORT).show();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">           <span class="keyword">if</span>(socket!=<span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="comment">//获取输出流对象</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                outputStream=socket.getOutputStream();</span><br><span class="line">                outputStream.write(<span class="number">123</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">try</span>&#123;</span><br><span class="line">                <span class="keyword">while</span> (<span class="keyword">true</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">final</span> <span class="keyword">byte</span>[] buffer = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];<span class="comment">//创建接收缓冲区</span></span><br><span class="line">                    inputStream = socket.getInputStream();</span><br><span class="line">                    <span class="keyword">final</span> <span class="keyword">int</span> len = inputStream.read(buffer);<span class="comment">//数据读出来，并且返回数据的长度</span></span><br><span class="line">                    runOnUiThread(<span class="keyword">new</span> Runnable()<span class="comment">//不允许其他线程直接操作组件，用提供的此方法可以</span></span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span></span><br><span class="line"><span class="function">                        </span>&#123;</span><br><span class="line">                            <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">                            receive.append(<span class="keyword">new</span> String(buffer,<span class="number">0</span>,len)+<span class="string">&quot;\r\n&quot;</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line"></span><br><span class="line">        &#125;&#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;&#125;</span><br></pre></td></tr></table></figure><h2 id="7-参考文章"><a href="#7-参考文章" class="headerlink" title="7.参考文章"></a>7.参考文章</h2><p><a href="https://blog.csdn.net/lyndon_li/article/details/82263172?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522160611526819725225053660%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&request_id=160611526819725225053660&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduend~default-2-82263172.first_rank_ecpm_v3_pc_rank_v2&utm_term=android%20tcp%E5%AE%A2%E6%88%B7%E7%AB%AF&spm=1018.2118.3001.4449">Android 一步步实现TCP客户端</a><br><a href="https://blog.csdn.net/pingping_010/article/details/86527609">Android网络编程之–Socket编程</a><br><a href="https://blog.csdn.net/qq_39400113/article/details/108183449?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522161579882416780271565422%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&request_id=161579882416780271565422&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduend~default-1-108183449.first_rank_v2_pc_rank_v29&utm_term=android%20tcp%E5%AE%A2%E6%88%B7%E7%AB%AF">android 之TCP客户端编程</a><br><a href="https://blog.csdn.net/weixin_48848716/article/details/107429683?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522161579882416780271525479%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fall.%2522%257D&request_id=161579882416780271525479&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_v2~rank_v29-16-107429683.first_rank_v2_pc_rank_v29&utm_term=android%20tcp%E5%AE%A2%E6%88%B7%E7%AB%AF">Android Studio TCP客户端实现</a><br><a href="https://blog.csdn.net/ASWaterbenben/article/details/90172103?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-1.control&dist_request_id=1328642.52964.16157988951892531&depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-1.control">Android的SocketTCP客户端发送信息</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;1-添加相关权限，使得android-app可以访问网络&quot;&gt;&lt;a href=&quot;#1-添加相关权限，使得android-app可以访问网络&quot; class=&quot;headerlink&quot; title=&quot;1.添加相关权限，使得android app可以访问网络&quot;&gt;&lt;/a&gt;1.</summary>
      
    
    
    
    <category term="Android" scheme="http://yeyuwenxi.github.io/categories/Android/"/>
    
    
  </entry>
  
  <entry>
    <title>Android实现TCP服务器</title>
    <link href="http://yeyuwenxi.github.io/2021/03/30/android-shi-xian-tcp-fu-wu-qi/"/>
    <id>http://yeyuwenxi.github.io/2021/03/30/android-shi-xian-tcp-fu-wu-qi/</id>
    <published>2021-03-30T14:26:35.000Z</published>
    <updated>2021-03-30T14:28:51.076Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1-获取本机ip地址"><a href="#1-获取本机ip地址" class="headerlink" title="1.获取本机ip地址"></a>1.获取本机ip地址</h2><p>建立socket连接之前，我们首先要获取本地的ip地址，这样，才能让客户端通过ip地址连接到服务器</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**获得IP地址，分为两种情况，一是wifi下，二是移动网络下，得到的ip地址是不一样的*/</span></span><br><span class="line">   <span class="function">String <span class="title">getIPAddress</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      Context context=MainActivity.<span class="keyword">this</span>;</span><br><span class="line">      NetworkInfo info = ((ConnectivityManager) context</span><br><span class="line">              .getSystemService(Context.CONNECTIVITY_SERVICE)).getActiveNetworkInfo();</span><br><span class="line">      <span class="keyword">if</span> (info != <span class="keyword">null</span> &amp;&amp; info.isConnected()) &#123;</span><br><span class="line">          <span class="keyword">if</span> (info.getType() == ConnectivityManager.TYPE_MOBILE) &#123;<span class="comment">//当前使用2G/3G/4G网络</span></span><br><span class="line">              <span class="keyword">try</span> &#123;</span><br><span class="line">                  <span class="comment">//Enumeration&lt;NetworkInterface&gt; en=NetworkInterface.getNetworkInterfaces();</span></span><br><span class="line">                  <span class="keyword">for</span> (Enumeration&lt;NetworkInterface&gt; en = NetworkInterface.getNetworkInterfaces(); en.hasMoreElements(); ) &#123;</span><br><span class="line">                      NetworkInterface intf = en.nextElement();</span><br><span class="line">                      <span class="keyword">for</span> (Enumeration&lt;InetAddress&gt; enumIpAddr = intf.getInetAddresses(); enumIpAddr.hasMoreElements(); ) &#123;</span><br><span class="line">                          InetAddress inetAddress = enumIpAddr.nextElement();</span><br><span class="line">                          <span class="keyword">if</span> (!inetAddress.isLoopbackAddress() &amp;&amp; inetAddress <span class="keyword">instanceof</span> Inet4Address) &#123;</span><br><span class="line">                              <span class="keyword">return</span> inetAddress.getHostAddress();</span><br><span class="line">                          &#125;</span><br><span class="line">                      &#125;</span><br><span class="line">                  &#125;</span><br><span class="line">              &#125; <span class="keyword">catch</span> (SocketException e) &#123;</span><br><span class="line">                  e.printStackTrace();</span><br><span class="line">              &#125;</span><br><span class="line">          &#125; <span class="keyword">else</span> <span class="keyword">if</span> (info.getType() == ConnectivityManager.TYPE_WIFI) &#123;<span class="comment">//当前使用无线网络</span></span><br><span class="line">              WifiManager wifiManager = (WifiManager) context.getSystemService(Context.WIFI_SERVICE);</span><br><span class="line">              WifiInfo wifiInfo = wifiManager.getConnectionInfo();</span><br><span class="line">              <span class="comment">//调用方法将int转换为地址字符串</span></span><br><span class="line">              String ipAddress = intIP2StringIP(wifiInfo.getIpAddress());<span class="comment">//得到IPV4地址</span></span><br><span class="line">              <span class="keyword">return</span> ipAddress;</span><br><span class="line">          &#125;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="comment">//当前无网络连接,请在设置中打开网络</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 将得到的int类型的IP转换为String类型</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> ip</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">   <span class="function">String <span class="title">intIP2StringIP</span><span class="params">(<span class="keyword">int</span> ip)</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> (ip &amp; <span class="number">0xFF</span>) + <span class="string">&quot;.&quot;</span> +</span><br><span class="line">              ((ip &gt;&gt; <span class="number">8</span>) &amp; <span class="number">0xFF</span>) + <span class="string">&quot;.&quot;</span> +</span><br><span class="line">              ((ip &gt;&gt; <span class="number">16</span>) &amp; <span class="number">0xFF</span>) + <span class="string">&quot;.&quot;</span> +</span><br><span class="line">              (ip &gt;&gt; <span class="number">24</span> &amp; <span class="number">0xFF</span>);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>这里需要注意的是，我们要添加以下几个权限<br>使得app可以访问网络状态</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;uses-permission android:name=<span class="string">&quot;android.permission.ACCESS_NETWORK_STATE&quot;</span> /&gt;</span><br><span class="line">    &lt;uses-permission android:name=<span class="string">&quot;android.permission.INTERNET&quot;</span>/&gt;</span><br><span class="line">    &lt;uses-permission android:name=<span class="string">&quot;android.permission.CHANGE_WIFI_STATE&quot;</span>/&gt;</span><br><span class="line">    &lt;uses-permission android:name=<span class="string">&quot;android.permission.ACCESS_WIFI_STATE&quot;</span> /&gt;</span><br></pre></td></tr></table></figure><h2 id="2-建立socket连接"><a href="#2-建立socket连接" class="headerlink" title="2.建立socket连接"></a>2.建立socket连接</h2><p>建立一个子线程，在子线程中建立socket连接</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConnectThread</span> <span class="keyword">extends</span> <span class="title">Thread</span></span>&#123;</span><br><span class="line">        OutputStream os;</span><br><span class="line">        Socket socket;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">               </span><br><span class="line">                <span class="comment">// 1.新建ServerSocket对象，创建指定端口的连接</span></span><br><span class="line">                ServerSocket serverSocket = <span class="keyword">new</span> ServerSocket(<span class="number">10000</span>);</span><br><span class="line"></span><br><span class="line">                <span class="comment">// 2.进行监听</span></span><br><span class="line">                socket = serverSocket.accept();<span class="comment">// 开始监听10000端口，并接收到此套接字的连接。&#125;&#125;&#125;</span></span><br></pre></td></tr></table></figure><h2 id="3-通过输入流接收消息"><a href="#3-通过输入流接收消息" class="headerlink" title="3.通过输入流接收消息"></a>3.通过输入流接收消息</h2><p>建立一个死循环，监听输入流来自客户端的消息</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> (<span class="keyword">true</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">final</span> <span class="keyword">byte</span>[] buffer = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];<span class="comment">//创建接收缓冲区</span></span><br><span class="line">                   InputStream inputStream = socket.getInputStream();</span><br><span class="line">                    <span class="keyword">final</span> <span class="keyword">int</span> len = inputStream.read(buffer);<span class="comment">//数据读出来，并且返回数据的长度</span></span><br><span class="line">                    runOnUiThread(<span class="keyword">new</span> Runnable()<span class="comment">//不允许其他线程直接操作组件，用提供的此方法可以</span></span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span></span><br><span class="line"><span class="function">                        </span>&#123;</span><br><span class="line">                            <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">                            text1.append(<span class="keyword">new</span> String(buffer,<span class="number">0</span>,len)+<span class="string">&quot;\r\n&quot;</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;);&#125;</span><br></pre></td></tr></table></figure><h2 id="4-通过输出流发送消息"><a href="#4-通过输出流发送消息" class="headerlink" title="4.通过输出流发送消息"></a>4.通过输出流发送消息</h2><p>  通过输出流的write()方法将消息发送到客户端</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">os = socket.getOutputStream();</span><br><span class="line">                String text=<span class="string">&quot;我是服务器&quot;</span>;</span><br><span class="line">                os.write(text.getBytes());</span><br></pre></td></tr></table></figure><p>下面实现通过Edittext发送输入的内容</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">fasong.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</span><br><span class="line">           <span class="meta">@Override</span></span><br><span class="line">           <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line">               <span class="keyword">if</span>(connectThread.socket!=<span class="keyword">null</span>)&#123;</span><br><span class="line">               String a=fasong_text.getText().toString();</span><br><span class="line"></span><br><span class="line">               <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">                   <span class="meta">@Override</span></span><br><span class="line">                   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                       <span class="keyword">try</span> &#123;</span><br><span class="line">                           connectThread.os.write(a.getBytes());</span><br><span class="line">                       &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                           e.printStackTrace();</span><br><span class="line">                       &#125;</span><br><span class="line">                   &#125;</span><br><span class="line">               &#125;).start();</span><br><span class="line"></span><br><span class="line">           &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                   Toast.makeText(MainActivity.<span class="keyword">this</span>,<span class="string">&quot;请先建立连接&quot;</span>,Toast.LENGTH_SHORT).show();</span><br><span class="line">               &#125;&#125;</span><br><span class="line"></span><br><span class="line">       &#125;);</span><br></pre></td></tr></table></figure><h2 id="5-测试"><a href="#5-测试" class="headerlink" title="5.测试"></a>5.测试</h2><p><strong>注意，由于模拟器的原因，模拟器ip无法作为tcp服务器被访问，所以这一部分测试只能在真机上进行。</strong><br>经过测试，服务器可以正常地和客户端进行通信。<br>这里偷点懒，放一张界面图，懒得再截真机测试的图片了。<br><img src="https://img-blog.csdnimg.cn/20210321165721149.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2NoZW54aWhhbmh1aQ==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p><h2 id="6-源代码"><a href="#6-源代码" class="headerlink" title="6.源代码"></a>6.源代码</h2><p>xml</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span><br><span class="line">&lt;LinearLayout xmlns:android=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span><br><span class="line">    xmlns:app=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span><br><span class="line">    xmlns:tools=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span><br><span class="line">    android:layout_width=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">    android:layout_height=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">    android:orientation=<span class="string">&quot;vertical&quot;</span></span><br><span class="line">    tools:context=<span class="string">&quot;.MainActivity&quot;</span>&gt;</span><br><span class="line">   &lt;EditText</span><br><span class="line">       android:id=<span class="string">&quot;@+id/fasong_text&quot;</span></span><br><span class="line">       android:hint=<span class="string">&quot;请输入要发送的内容&quot;</span></span><br><span class="line">       android:layout_width=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">       android:layout_height=<span class="string">&quot;wrap_content&quot;</span>/&gt;</span><br><span class="line">    &lt;Button</span><br><span class="line">        android:text=<span class="string">&quot;发送&quot;</span></span><br><span class="line">        android:id=<span class="string">&quot;@+id/fasong&quot;</span></span><br><span class="line">        android:layout_width=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">        android:layout_height=<span class="string">&quot;wrap_content&quot;</span>/&gt;</span><br><span class="line">    &lt;TextView</span><br><span class="line">        android:id=<span class="string">&quot;@+id/text1&quot;</span></span><br><span class="line">        android:layout_width=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">        android:layout_height=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">        android:text=<span class="string">&quot;\n&quot;</span></span><br><span class="line">        app:layout_constraintBottom_toBottomOf=<span class="string">&quot;parent&quot;</span></span><br><span class="line">        app:layout_constraintLeft_toLeftOf=<span class="string">&quot;parent&quot;</span></span><br><span class="line">        app:layout_constraintRight_toRightOf=<span class="string">&quot;parent&quot;</span></span><br><span class="line">        app:layout_constraintTop_toTopOf=<span class="string">&quot;parent&quot;</span> /&gt;</span><br><span class="line"></span><br><span class="line">&lt;/LinearLayout&gt;</span><br></pre></td></tr></table></figure><p>Mainactivity</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</span><br><span class="line">    TextView text1;</span><br><span class="line">    EditText fasong_text;</span><br><span class="line">    ConnectThread connectThread;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line">        <span class="comment">//Toast.makeText(MainActivity.this,&quot;123&quot;,Toast.LENGTH_SHORT).show();</span></span><br><span class="line">        text1=findViewById(R.id.text1);</span><br><span class="line">        fasong_text=findViewById(R.id.fasong_text);</span><br><span class="line">        Button fasong=findViewById(R.id.fasong);</span><br><span class="line"></span><br><span class="line">         connectThread=<span class="keyword">new</span> ConnectThread();</span><br><span class="line">        connectThread.start();</span><br><span class="line">   <span class="comment">//获取本地ip地址</span></span><br><span class="line">        text1.append(<span class="string">&quot;本地ip地址为：&quot;</span>+getIPAddress()+<span class="string">&quot; 端口号为10000&quot;</span>);</span><br><span class="line">        text1.append(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        fasong.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line">                <span class="keyword">if</span>(connectThread.socket!=<span class="keyword">null</span>)&#123;</span><br><span class="line">                String a=fasong_text.getText().toString();</span><br><span class="line"></span><br><span class="line">                <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                        <span class="keyword">try</span> &#123;</span><br><span class="line">                            connectThread.os.write(a.getBytes());</span><br><span class="line">                        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                            e.printStackTrace();</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;).start();</span><br><span class="line"></span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    Toast.makeText(MainActivity.<span class="keyword">this</span>,<span class="string">&quot;请先建立连接&quot;</span>,Toast.LENGTH_SHORT).show();</span><br><span class="line">                &#125;&#125;</span><br><span class="line"></span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**获得IP地址，分为两种情况，一是wifi下，二是移动网络下，得到的ip地址是不一样的*/</span></span><br><span class="line">     <span class="function">String <span class="title">getIPAddress</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Context context=MainActivity.<span class="keyword">this</span>;</span><br><span class="line">        NetworkInfo info = ((ConnectivityManager) context</span><br><span class="line">                .getSystemService(Context.CONNECTIVITY_SERVICE)).getActiveNetworkInfo();</span><br><span class="line">        <span class="keyword">if</span> (info != <span class="keyword">null</span> &amp;&amp; info.isConnected()) &#123;</span><br><span class="line">            <span class="keyword">if</span> (info.getType() == ConnectivityManager.TYPE_MOBILE) &#123;<span class="comment">//当前使用2G/3G/4G网络</span></span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    <span class="comment">//Enumeration&lt;NetworkInterface&gt; en=NetworkInterface.getNetworkInterfaces();</span></span><br><span class="line">                    <span class="keyword">for</span> (Enumeration&lt;NetworkInterface&gt; en = NetworkInterface.getNetworkInterfaces(); en.hasMoreElements(); ) &#123;</span><br><span class="line">                        NetworkInterface intf = en.nextElement();</span><br><span class="line">                        <span class="keyword">for</span> (Enumeration&lt;InetAddress&gt; enumIpAddr = intf.getInetAddresses(); enumIpAddr.hasMoreElements(); ) &#123;</span><br><span class="line">                            InetAddress inetAddress = enumIpAddr.nextElement();</span><br><span class="line">                            <span class="keyword">if</span> (!inetAddress.isLoopbackAddress() &amp;&amp; inetAddress <span class="keyword">instanceof</span> Inet4Address) &#123;</span><br><span class="line">                                <span class="keyword">return</span> inetAddress.getHostAddress();</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SocketException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (info.getType() == ConnectivityManager.TYPE_WIFI) &#123;<span class="comment">//当前使用无线网络</span></span><br><span class="line">                WifiManager wifiManager = (WifiManager) context.getSystemService(Context.WIFI_SERVICE);</span><br><span class="line">                WifiInfo wifiInfo = wifiManager.getConnectionInfo();</span><br><span class="line">                <span class="comment">//调用方法将int转换为地址字符串</span></span><br><span class="line">                String ipAddress = intIP2StringIP(wifiInfo.getIpAddress());<span class="comment">//得到IPV4地址</span></span><br><span class="line">                <span class="keyword">return</span> ipAddress;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">//当前无网络连接,请在设置中打开网络</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 将得到的int类型的IP转换为String类型</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> ip</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">     <span class="function">String <span class="title">intIP2StringIP</span><span class="params">(<span class="keyword">int</span> ip)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> (ip &amp; <span class="number">0xFF</span>) + <span class="string">&quot;.&quot;</span> +</span><br><span class="line">                ((ip &gt;&gt; <span class="number">8</span>) &amp; <span class="number">0xFF</span>) + <span class="string">&quot;.&quot;</span> +</span><br><span class="line">                ((ip &gt;&gt; <span class="number">16</span>) &amp; <span class="number">0xFF</span>) + <span class="string">&quot;.&quot;</span> +</span><br><span class="line">                (ip &gt;&gt; <span class="number">24</span> &amp; <span class="number">0xFF</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">ConnectThread</span> <span class="keyword">extends</span> <span class="title">Thread</span></span>&#123;</span><br><span class="line">        OutputStream os;</span><br><span class="line">        Socket socket;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line"></span><br><span class="line">                <span class="comment">// 1.新建ServerSocket对象，创建指定端口的连接</span></span><br><span class="line">                ServerSocket serverSocket = <span class="keyword">new</span> ServerSocket(<span class="number">10000</span>);</span><br><span class="line"></span><br><span class="line">                <span class="comment">// 2.进行监听</span></span><br><span class="line">                socket = serverSocket.accept();<span class="comment">// 开始监听10000端口，并接收到此套接字的连接。</span></span><br><span class="line">                <span class="comment">// 3.拿到输入流（客户端发送的信息就在这里）</span></span><br><span class="line"></span><br><span class="line">                Log.i(<span class="string">&quot;a&quot;</span>,<span class="string">&quot;连接成功&quot;</span>);</span><br><span class="line">                 os = socket.getOutputStream();</span><br><span class="line">                String text=<span class="string">&quot;我是服务器&quot;</span>;</span><br><span class="line">                os.write(text.getBytes());</span><br><span class="line"></span><br><span class="line">                <span class="keyword">while</span> (<span class="keyword">true</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">final</span> <span class="keyword">byte</span>[] buffer = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];<span class="comment">//创建接收缓冲区</span></span><br><span class="line">                   InputStream inputStream = socket.getInputStream();</span><br><span class="line">                    <span class="keyword">final</span> <span class="keyword">int</span> len = inputStream.read(buffer);<span class="comment">//数据读出来，并且返回数据的长度</span></span><br><span class="line">                    runOnUiThread(<span class="keyword">new</span> Runnable()<span class="comment">//不允许其他线程直接操作组件，用提供的此方法可以</span></span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span></span><br><span class="line"><span class="function">                        </span>&#123;</span><br><span class="line">                            <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">                            text1.append(<span class="keyword">new</span> String(buffer,<span class="number">0</span>,len)+<span class="string">&quot;\r\n&quot;</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;);&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                <span class="comment">// 关闭输入流</span></span><br><span class="line">               <span class="comment">// socket.shutdownInput();</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                <span class="comment">/*os.flush();</span></span><br><span class="line"><span class="comment">                // 关闭输出流</span></span><br><span class="line"><span class="comment">                socket.shutdownOutput();</span></span><br><span class="line"><span class="comment">                os.close();</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">                // 关闭IO资源</span></span><br><span class="line"><span class="comment">                bufReader.close();</span></span><br><span class="line"><span class="comment">                reader.close();</span></span><br><span class="line"><span class="comment">                is.close();</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">                socket.close();// 关闭socket</span></span><br><span class="line"><span class="comment">                serverSocket.close();// 关闭ServerSocket*/</span></span><br><span class="line"></span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="7-参考文章"><a href="#7-参考文章" class="headerlink" title="7.参考文章"></a>7.参考文章</h2><p><a href="https://blog.csdn.net/chenxihanhui/article/details/115050849">Android实现TCP客户端</a><br><a href="https://blog.csdn.net/pingping_010/article/details/86527609">Android网络编程之–Socket编程</a><br><a href="https://www.jb51.net/article/153245.htm">Android获得设备状态信息、Mac地址、IP地址的方法</a><br><a href="https://blog.csdn.net/lyndon_li/article/details/82263172?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522160611526819725225053660%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&request_id=160611526819725225053660&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduend~default-2-82263172.first_rank_ecpm_v3_pc_rank_v2&utm_term=android%20tcp%E5%AE%A2%E6%88%B7%E7%AB%AF&spm=1018.2118.3001.4449">Android 一步步实现TCP客户端</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;1-获取本机ip地址&quot;&gt;&lt;a href=&quot;#1-获取本机ip地址&quot; class=&quot;headerlink&quot; title=&quot;1.获取本机ip地址&quot;&gt;&lt;/a&gt;1.获取本机ip地址&lt;/h2&gt;&lt;p&gt;建立socket连接之前，我们首先要获取本地的ip地址，这样，才能让客户端通</summary>
      
    
    
    
    <category term="Android" scheme="http://yeyuwenxi.github.io/categories/Android/"/>
    
    
  </entry>
  
  <entry>
    <title>读《偷影子的人》</title>
    <link href="http://yeyuwenxi.github.io/2021/03/30/du-tou-ying-zi-de-ren/"/>
    <id>http://yeyuwenxi.github.io/2021/03/30/du-tou-ying-zi-de-ren/</id>
    <published>2021-03-30T13:41:21.000Z</published>
    <updated>2021-03-30T13:46:33.683Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>自己很久以前写的一篇文章。</p></blockquote><p>#《偷影子的人》:你是否真正地找到了自己</p><h3 id="01"><a href="#01" class="headerlink" title="01"></a>01</h3><p>有这样一个人，他没有独特的名字，却拥有一种独特的能力，他能够偷得到别人的影子，并能够与影子对话，从而听到人们内心深处的不安，疑惑以及他们不为人知的梦想。</p><p>然而在他长大以后，他所具有的这种能力慢慢地变弱，他不有那样强烈的意愿，不在有那样强的好奇心，不再那样认真而真诚的去倾听，去关心我们所在乎与在乎我们的人。</p><p>虽然他因为童年的愿望而成为了一名医生，然而他不再能够如当初一般，能够听得到别人的心声，他是否还能和当初一样地认真而真诚地对待周边的人？</p><p>在这样的过程里，他慢慢的接受了亲情，友情以及爱情的一场场考验，在这样的考验里一点点地成长，并在最终找到了真正对自己来说重要的东西，成为了他自己，成为了一个真正意义上的人。</p><h3 id="02"><a href="#02" class="headerlink" title="02"></a>02</h3><p>每个人都有自己的独特性，这种独特性可能会让你鹤立鸡群，可能会让你昂扬得意，也可能会让你被数落，被嘲讽，被践踏，但恰恰是这种独特性让你成为了你自己，而不是其他任何人。</p><p>偷影子的人正拥有这样一种独特的能力:他能偷得到别人的影子，并能与影子对话，能听得到别人内心深处那些不为人知的，不想说出秘密与梦想以及那些不想说出口的心里话。</p><p>起初，这种能力让他恐惧，他不愿意去偷听别人的秘密，不愿意去偷别人的影子，也害怕自己这种独特的能力被别人发现，从而被视为异类，被孤立，被别人打击，欺负，嘲讽。</p><p>但慢慢地，他开始试着接受这种能力，并积极地与影子交流，去帮助每一个影子的主人，去点亮他们生命中的小小光芒，帮助他们实现自己内心深处的梦想，给予他们最真诚的关注。</p><p>在帮助别人的过程里，他也慢慢地明白，原来有那么多的人都在说谎，而且他们的谎言一旦开始就不能停下，尽管这些谎言都是善意的谎言。原来有那么多的人，都把梦想深深地埋藏在心底，不愿意去向别人倾诉。</p><h3 id="03"><a href="#03" class="headerlink" title="03"></a>03</h3><p>他也试着去帮助最好的朋友，实现他内心深处的梦想，帮助他成为医生，而不想让他像他父亲一样，一辈子做个面包师。</p><p>他的朋友不愿意放弃现在的生活，不愿意放下他的家人，去实现自己的梦想。所以他直接去找了朋友的父亲，讲述了朋友的梦想，朋友的父亲赶走了他，却也在后来的日子里赶走了朋友。父亲让朋友去实现自己的梦想，并告诉朋友，如果想回来的话，他会教给朋友如何成为一个优秀的面包师。</p><p>朋友离开家乡，开始去学习，学习如何成为一个医生，然后很好地造福他人，实现自己的梦想，但在后来的日子里，他发现，他并不适合成为一个医生。做一个医生，他没有想象中那般快乐，相反的，做一个像父亲那样的面包师，更能让自己快乐，自己喜欢看到面包出炉时的画面，喜欢看到人们拿到面包时的那种满足感，尽管自己不能成为一个优秀的医生，但自己可以去成为一个优秀的面包师！</p><p>所以朋友离开了医院，再一次地回到家中开始学做面包，去体验真正属于自己的生活，去经历真正属于自己的精彩，也真正地成为自己！</p><h3 id="04"><a href="#04" class="headerlink" title="04"></a>04</h3><p>在爱情上，偷影子的人遇见过三个重要的女孩，班级里的伊丽莎白，沙滩上有着大提琴般笑声的克莱儿，以及同为医学生的苏菲。</p><p>伊丽莎白是童年时的倾慕，却没有成为真正的爱情，最终只成为了一种报复，一种虚荣。</p><p>长大以后遇到的苏菲，尽管很努力地维持两人的关系，却也难以真正地走入对方的心扉，最后只能不了了之。</p><p>只有那个沙滩上遇到的克莱儿，那个有着青梅竹马记忆的女孩，那个曾经许下诺言来年再见的女孩，那个用风筝写下我想你的女孩，才是自己埋藏在心底里喜欢的人。</p><p>在母亲去世之后，偷影子的人终于意识到，最美好的回忆就在当下，他应该趁着曾经的回忆还未消散，去做点什么，他去曾经的沙滩上找到了克蕾儿的消息，又多方打听找到了她，并用风筝唤回了她的记忆，两个人终于又一次地拥抱在一起。</p><p>他也终于找到了那份属于自己的温暖！</p><h3 id="05"><a href="#05" class="headerlink" title="05"></a>05</h3><p>我一直相信，每个人都是与众不同的，每个人都有理由成为他自己。然而在这个缤纷多彩的大千世界里，总有那么多的人想要成为别人，想成为跟别人一模一样的人。</p><p>他们在生活里，在成长的过程中，慢慢的放弃着自己的独特性，慢慢的磨灭着自己所有与众不同的棱角，从而慢慢的融入大众，融入人群，变成了无数的江河湖海里，无数水滴中不再独特的一滴小水滴。</p><p>确实，融入大众可以让人获得一种安全感，让人不再被嘲笑，不再被讽刺，不再被针对。然而，他们却忘记了，成长的目的以及意义并不是为了让一个人放弃所有的棱角，而是为了让一个人去寻找，去探索，去在多种多样的生活里，去在夜深人静，梦的远方里，慢慢的寻找那些自己所热爱的与属于自己的东西，找到那一片真正属于自己的天空。</p><p>我并不是说归于平凡不好，只是所有的人不应当变的一模一样，世界不需要那么多标准化的人，我们应该有一点理想主义，试着去追求自己的梦想，与寻找那些年少时内心的希望与感动，试着去追寻一下自己的初心，成为一个真正意义上有灵魂，有思想的不可替代的人，也成为独特的自己！</p>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;自己很久以前写的一篇文章。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;#《偷影子的人》:你是否真正地找到了自己&lt;/p&gt;
&lt;h3 id=&quot;01&quot;&gt;&lt;a href=&quot;#01&quot; class=&quot;headerlink&quot; title=&quot;01&quot;&gt;&lt;/a&gt;01&lt;/</summary>
      
    
    
    
    <category term="随笔" scheme="http://yeyuwenxi.github.io/categories/%E9%9A%8F%E7%AC%94/"/>
    
    
  </entry>
  
  <entry>
    <title>读《追风筝的人》</title>
    <link href="http://yeyuwenxi.github.io/2021/03/30/du-zhui-feng-zheng-de-ren/"/>
    <id>http://yeyuwenxi.github.io/2021/03/30/du-zhui-feng-zheng-de-ren/</id>
    <published>2021-03-30T09:33:51.000Z</published>
    <updated>2021-03-30T09:33:51.295Z</updated>
    
    
    
    
    
  </entry>
  
  <entry>
    <title>谈谈《人生》</title>
    <link href="http://yeyuwenxi.github.io/2021/03/30/du-ren-sheng/"/>
    <id>http://yeyuwenxi.github.io/2021/03/30/du-ren-sheng/</id>
    <published>2021-03-30T09:33:19.000Z</published>
    <updated>2021-03-30T13:39:08.122Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>自己很久以前写的一篇文章了。</p></blockquote><h1 id="《人生》-命运与个人的抉择"><a href="#《人生》-命运与个人的抉择" class="headerlink" title="《人生》:命运与个人的抉择"></a>《人生》:命运与个人的抉择</h1><h3 id="01"><a href="#01" class="headerlink" title="01"></a>01</h3><p>放假在家，又捧起了路遥的《人生》。</p><p>记得第一次遇到这本书的时候，大概是两年前，在书店里瞎逛，因为“路遥”二字而取下了这本书。</p><p>在学校用不到一个星期就读完了这本书，或许是因为读过《平凡的世界》的缘故，感觉相比而言，这本书着眼点有些狭窄，只描写了生活中的一个片段，显得有些短暂，没有我想象的那般大气，似乎配不上人生这个书名。</p><p>现如今的我，经历了高考的抉择，也渐渐地明白了柳青所写的那句话:人生的道路虽然漫长，但紧要处却常常只有几步。而这几处抉择却往往可以决定你很长一个时期甚至是一生的道路。</p><p>人的生活，整体上来说是平淡的，也是平凡的，就像行走在乡间的小路上，碰到岔路口，需要选择的时候，才能真正的展现一个人的与众不同，也能真正地考量一个人的品性。</p><p>从这方面来说，路遥的《人生》，虽描写的面并不够广阔，但却用一个片段反应了高加林以及他周边人的品性和他们那广阔的生活，也展现了时代与命运给人带来的抉择。</p><h3 id="02"><a href="#02" class="headerlink" title="02"></a>02</h3><p>整个故事并不太长，也不复杂，主要讲述了改革开放初期，做教师的高加林被村长的儿子替换下后，陷入了生活的困境，然而就在这时，村子里最漂亮却大字不识几个的巧珍向这位落魄的先生表达了爱意。教书先生迫于生计下地抡起了撅头，而与巧珍的爱情却给了他生活的希望与热情。</p><p>如果就这样下去，或许他们能结婚生子，平静地生活下去。然而高加林在军区的叔叔被调到了地方做了领导，村镇里的公职人员为了讨好这位领导，走后门把高加林弄回了县城，让他做了当地的记者。</p><p>高加林到了县城后，遇到了他的中学同学黄亚萍。黄亚萍欣赏高加林的个人品质，为他的才气，性格所吸引，甩掉了当前的对象张克南，主动向高加林表明了心意。高加林犹犹豫豫，最终在巧珍与黄亚萍之间选择了城镇中的女孩黄亚萍。</p><p>巧珍受到了刺激，但她并没有选择轻生，也没有疯癫，（在当时这是一件非常大的事情，巧珍的名誉受到了损失，村民们认为她会轻生或疯掉），而是选择了继续热情地生活，并与来提亲的马栓结了婚。</p><p>高加林与黄亚萍在县城里享受着生活，并计划迁居南京。但是生活又一次给他开了个玩笑，给了他一次沉重的打击。黄亚萍的前男友的妈妈向纪委举报了高加林，高加林又要被迫地回到农村。黄亚萍喜欢高加林，但她又不喜欢高加林做农民，最后迫于现实，他们无奈地分了手。他与黄亚萍之间的爱情来的突然，去的也突然，就像一场梦一样，他们之间终究还是有一道鸿沟难以跨越。</p><p>高加林又突然想起了巧珍，他发觉他还是爱着巧珍的，他感到了深深地愧疚。得知巧珍已经结婚后，高加林又感到了深深的后悔。他想轻生，但村民们的热情与真诚以及德顺老汉的劝说又让高加林感受到了生活的美好与希望。</p><h3 id="03"><a href="#03" class="headerlink" title="03"></a>03</h3><p>从民办教师掉到黄土地里去，这是命运给他的挫折与考验。在人生的路口，巧珍的温情，给了他生活的热情，但高加林却并不甘心就这样在农村里待下去，他上过学，有些文化，有着与一般农民不一样的想法与眼界，有着年轻人的志向与傲气，他任然渴望着有朝一日能够走出去，去看看诗与远方。</p><p>而调到县城做通讯干事，无疑又给了他施展才华的机会。他也确实没有辜负这个职位，写出了一些好文章。</p><p>他的老同学黄亚萍在读到他的文章时，又突然意识到，她还是爱着他的。于是她大胆地甩掉了当前的对象，向高加林倾诉爱意。</p><p>高加林陷入了内心的斗争，他知道，他正在进行一场非常严重的抉择。</p><p>黄亚萍与刘巧珍放在一起比较，不平衡是显而易见的，他渴望和亚萍在一起，渴望外面更加精彩的生活，不愿意在一眼就能望到未来的黄土地上埋葬自己的一生。</p><p>但他的良心感到不安，他不是一个十恶不赦的坏蛋，他还是在乎巧珍的。后来，他强迫自己使心肠变硬，为了他的远大前途，必须做出牺牲。</p><p>就这样高加林做出了关乎他一生的重要决定，得知消息的巧珍痛不欲生，很快便嫁为人妇。高加林与黄亚萍则开始享受他们的二人世界，似乎他们能够永远这样的生活下去。</p><p>但命运总是不尽人意的，高加林受到了举报，必须回到农村。黄亚萍喜欢高加林，但她不喜欢做农民的高加林，现在，他们又不得不分开。</p><p>高加林得到之后又失去，丢掉了巧珍，丢掉了良心，现在又失去了黄亚萍与他的远大前程，不得不丢人地回到村中。</p><h3 id="04"><a href="#04" class="headerlink" title="04"></a>04</h3><p>整个故事中高加林失去，得到最后又失去，几经起伏，最后造成了自己以及两个女子的悲剧。</p><p>高加林有知识，有文化，也有才气，有能力，最后却失去了一切所追求的事物，也丢掉了良心。</p><p>命运或许给了他许多苦难，但真正酿成自己的悲剧的，还是高加林自己。为了功名，为了虚荣，为了利益，为了所谓的自己想要的生活，高加林背弃了诺言，辜负了巧珍，放弃了一个人应当坚持的原则。</p><p>事实证明，高加林的生活哲学是错误的，他昧了良心，抛弃了巧珍，却没有得到自己想要的，最后两手空空，伤害了自己，也伤害了他人，造成了无可挽回的悲剧。<br>###05</p><p>其实并没有什么命运，一个人的命运终究还是由自己创造的，你的每一个决定，每一个习惯，都在慢慢地铸造着自己的命运。</p><p>时代或许会给每一个人带来许多痛苦，但这也并不是深渊，并不是令人绝望的困境，恰恰相反，它是磨刀石，会让你在痛苦的过程中，一次又一次地改变自己，提高自己，持续地抛弃那些不正确的习惯，方法，思想。</p><p>时代的抉择，对个人来说是痛苦的，但它是有价值的，他让每一个人与时代一起进步，一起成长。</p><p>而在时代的抉择中，裹挟着无数艰难的，无奈的个人的抉择，对个人来说，这些抉择是至关重要的，是关乎一生的，每一个决定，都有可能彻底地改变或影响自己的决定。</p><p>在人生紧要的那几步，需要每一个人自己去抉择，这些抉择，考验着每一个人的心性，能力，思想，需要一个人认认真真地去选择，绝不能背弃自己的原则，忘却自己的初心。</p><blockquote><p>愿将来有一天，当我们轻声叹息将往事回顾的时候，可以骄傲的说，当年选择了这条路，我不后悔，也没有遗憾！</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;自己很久以前写的一篇文章了。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&quot;《人生》-命运与个人的抉择&quot;&gt;&lt;a href=&quot;#《人生》-命运与个人的抉择&quot; class=&quot;headerlink&quot; title=&quot;《人生》:命运与个人的抉择&quot;&gt;&lt;/</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>当我看手机的时候我在看些什么</title>
    <link href="http://yeyuwenxi.github.io/2021/03/30/dang-wo-kan-shou-ji-de-shi-hou-wo-zai-kan-xie-shi-me/"/>
    <id>http://yeyuwenxi.github.io/2021/03/30/dang-wo-kan-shou-ji-de-shi-hou-wo-zai-kan-xie-shi-me/</id>
    <published>2021-03-30T08:19:45.000Z</published>
    <updated>2021-03-30T12:28:01.385Z</updated>
    
    <content type="html"><![CDATA[<p>2021年3月29日，第1天。</p><p>今天想谈谈手机，自己似乎花费了太多时间在手机上，但好像又什么事情都没有做。<br>往往只是刷着一些毫无意义的信息，自以为在学习，实则什么都没有收获。<br>只有当屏幕亮着时，自己才会跟着网上的段子，奇闻趣事，傻傻地乐一乐，每当屏幕熄灭，自己又能记住什么，总想着做有意义的事情，但这样碎片化地看一些纷繁杂乱的信息，真的对自己有意义吗？手机灭屏之后，乐过的段子，笑过的笑话，也都随之而去，留给自己的，只有身体的疲惫和精神的空虚。<br>每天深夜，在睡前，总会拿着手机上网毫无目的漫游，仿佛只有这样，自己才能得到心灵的宁静与放松，可每天夜晚一刷起来就不知道要到什么时候才会停止，最后得到的往往不是心灵的宁静，而是身心的疲惫，然后在疲惫中关上屏幕，闭上干涩、肿胀的双眼，最后昏昏沉沉地睡去，第二天再无精打采地起来。<br><strong>毫无克制地刷手机，带给自己的只是一时的安慰和舒适，留下的确是杂乱的生活和疲惫不堪的身心。</strong><br>当我看手机时我在看些什么，又在追求些什么？<br>看了一下今天的手机屏幕使用时间，6小时39分，在最近几天里不算是比较多的，平均每天，自己使用手机的时间都在7小时以上，那么当我看手机的时候我在看些什么呢？<br>分析了一下上一周手机屏幕的使用时间，具体如下：</p><blockquote><p>微信读书：14时42分<br>王者荣耀：10时47分<br>知乎：7时34分<br>QQ:6时24分<br>微信：6时13分<br>抖音：5时1分<br>学习强国：2时54分<br>百度贴吧：2时40分<br>低于2小时的未列出</p></blockquote><p>这只是最近一周的数据，或许每周使用情况不太一样，但这些数据还是有很有的代表性的。<br>自己玩手机的时间基本上花在了聊天社交、图书阅读和游戏上，下面依次分析一下这几项。<br><strong>聊天社交</strong><br>无论是在自己看来还是在别人看来，自己从来都不是一个热爱社交的人，但在聊天社交这一项花的时间确实那么长。<br>微信、QQ用了那么久，自己真的是在跟人聊天吗？<br>好像不是的，大部分时间都是在刷朋友圈，毫无目的地随便看一看，自己根本就没有那么多的时间用在聊天上，这似乎早就不是真正的社交了，更多的是排解无聊与空虚的无意义行为，行为过后，带来的是更多的空虚与无聊，然后就在这个陷阱里反反复复。<br>朋友圈真的有那么好看吗？<br>这个时代，我们似乎都太过于在乎别人的生活，而往往忘记了自己真正的生活所在。<br>关注别人再多，又对自己的生活有什么好处呢？<br>这样的事情，并没有拉近自己与朋友的距离，反而会在朋友圈被包装的信息下，变得越来越陌生。<br>偶尔刷一刷，获取一些信息，了解一下朋友的最新动态，这无可厚非，但把太多的时间花在朋友圈上，就有过之而无不及了。<br>同样的，知乎也是如此，刷知乎或许在某种程度上让自己获取到了一些信息，但更多的，是信息背后无止尽的焦虑，刷知乎，并不能让自己成长，能让自己真正成长的是关闭知乎后深刻的思索和内省。<br><strong>图书阅读</strong><br>这一点就不多说什么了，最近正在培养阅读的习惯，希望接下来能坚持下去，读一些经典之作。<br><strong>游戏</strong><br>最近这一年，打的最多的游戏就是王者荣耀了，从去年春天疫情在家开始，到今年春天，自己入坑王者1年出头了。<br>自己以前一直是个不怎么打游戏的人，王者荣耀也是自己游戏时长最长的游戏了。<br>打王者这一年，自己收获了些什么呢？<br>最初打王者，是为了排解无聊，加强与朋友之间的联系，但一年以来，这一点似乎并没有做到自己想象的样子，自己更多的时间是一个人沉迷于游戏中，打王者，并没有让自己变得更会社交，更加不无聊，反而更加的空虚，更加的因为游戏中的各种逆风而情绪化。<br>打王者，早就违背了自己最开始的初衷。<br>所以，我决定卸载这个游戏，开始自己新的生活。<br><strong>结语</strong><br>未完待续……</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;2021年3月29日，第1天。&lt;/p&gt;
&lt;p&gt;今天想谈谈手机，自己似乎花费了太多时间在手机上，但好像又什么事情都没有做。&lt;br&gt;往往只是刷着一些毫无意义的信息，自以为在学习，实则什么都没有收获。&lt;br&gt;只有当屏幕亮着时，自己才会跟着网上的段子，奇闻趣事，傻傻地乐一乐，每当屏</summary>
      
    
    
    
    <category term="心情日记" scheme="http://yeyuwenxi.github.io/categories/%E5%BF%83%E6%83%85%E6%97%A5%E8%AE%B0/"/>
    
    
  </entry>
  
  <entry>
    <title>关于《灵山》</title>
    <link href="http://yeyuwenxi.github.io/2021/03/30/guan-yu-ling-shan/"/>
    <id>http://yeyuwenxi.github.io/2021/03/30/guan-yu-ling-shan/</id>
    <published>2021-03-30T08:17:56.000Z</published>
    <updated>2021-03-30T13:34:57.472Z</updated>
    
    <content type="html"><![CDATA[<p>之前写了关于神游的一些东西，现在谈谈灵山，记录一些印象深刻的观点。<br>灵山和神游是一脉相成的，核心的价值观和思想是一致的，在关于神游中谈过的一些东西，这里就不再写了。<br>灵山是徐公子仙侠世界的集大成者，不仅描述了一个仙气飘飘的修行世界，更向我们展示了为什么现实世界看不到仙，为什么仙人永隔。</p><h3 id="修行发愿"><a href="#修行发愿" class="headerlink" title="修行发愿"></a>修行发愿</h3><p>所行即所愿，应为即愿为</p><h3 id="真如常在"><a href="#真如常在" class="headerlink" title="真如常在"></a>真如常在</h3><p>不要管他是谁，且看他如何与你相处。</p><h3 id="仙界的存在"><a href="#仙界的存在" class="headerlink" title="仙界的存在"></a>仙界的存在</h3><h3 id="三大戒律"><a href="#三大戒律" class="headerlink" title="三大戒律"></a>三大戒律</h3><p>未完待续</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;之前写了关于神游的一些东西，现在谈谈灵山，记录一些印象深刻的观点。&lt;br&gt;灵山和神游是一脉相成的，核心的价值观和思想是一致的，在关于神游中谈过的一些东西，这里就不再写了。&lt;br&gt;灵山是徐公子仙侠世界的集大成者，不仅描述了一个仙气飘飘的修行世界，更向我们展示了为什么现实世界看</summary>
      
    
    
    
    <category term="随笔" scheme="http://yeyuwenxi.github.io/categories/%E9%9A%8F%E7%AC%94/"/>
    
    
  </entry>
  
  <entry>
    <title>关于《神游》</title>
    <link href="http://yeyuwenxi.github.io/2021/03/29/guan-yu-shen-you/"/>
    <id>http://yeyuwenxi.github.io/2021/03/29/guan-yu-shen-you/</id>
    <published>2021-03-29T11:38:52.000Z</published>
    <updated>2021-03-30T13:21:07.995Z</updated>
    
    <content type="html"><![CDATA[<p>最近刚刚读完了《神游》，记录一些笔记和自己的想法。<br>自己是读完《灵山》之后，被徐公子构建的仙侠世界所震撼，才开始继续读他的书《神游》的。<br>神游与其说是一本修仙小说，更像是一本都市小说，在神游的世界里，徐公子展示了世俗人与修行人是如何共同生活在现代化的世界里的。<br>尽管神游中有很多修行的方式和境界描写，但抛开这些修仙的外衣，神游更像是在讲为人处世的方式，人在世间的言行举止，才是最大的修行。</p><h3 id="妄心"><a href="#妄心" class="headerlink" title="妄心"></a>妄心</h3><p>妄心劫，徐公子世界中修行人必经的一大劫。<br>人人皆有妄心，有妄心，即有痛苦。<br>金钱，名利，权利，这是世俗众生每个人都有的妄心，得不到，就有了巨大的痛苦。<br>破妄，方成真人，只有破妄，才能变得更加强大。<br>破妄的关键不在于善或恶，而在于真如常在，以真实的方法应对每一件事，做到对自己真诚，修得一颗真心。<br>破妄有两种方式，以真破妄，或是以妄修真。<br>第一种是在妄境中做现实人，也就是刚刚谈到的真心，用真心面对每一件事情。<br>第二种是在现实中做妄境人，努力地把妄境变成现实，这是堕入魔道，真心被妄境所驱使，哪怕拥有再强的手段，也只不过是欲望的奴隶。</p><h3 id="真空"><a href="#真空" class="headerlink" title="真空"></a>真空</h3><p>所谓真空，个人觉得是一种无我的状态。<br>进入真空劫，世间再无这个我，法力尽失，神通皆无，只能以心渡劫，再造自我。<br>接地气一点来说，就是假如你没有了自己所依赖的各种超越平常人的能力，比如说过人的智商，情商，强健的身体，美丽的外貌，巨大的财富与名利等等，接下来你该怎么面对自己的生活，怎么在无我的状态下生活，想通了这一点并平静地面对，才能度过真空天劫。<br>《金刚经》中有一句话叫做“心无所住，而生其心”，我觉得也是对真空的一种阐述，不着迷与一切相，方能度过真空。</p><h3 id="苦海"><a href="#苦海" class="headerlink" title="苦海"></a>苦海</h3><p>苦海劫，照见前世今生，历经人间种种。<br>经历人间的种种修行，在苦海中历练，最终成就真我。</p><h3 id="一流的性情"><a href="#一流的性情" class="headerlink" title="一流的性情"></a>一流的性情</h3><p>神游中一直在讲石野是一流的性情，什么是一流的性情呢？<br>在我看来，所谓一流的性情，就是一种无怨无悔的状态，不论做什么事，最终都无怨无悔，不因选择的结果而怨天尤人，顾影自怜，而是坦然面对，哪怕有机会再相同的情况下再选一次，也仍然坚定自己的选择。</p><h3 id="修行的目的"><a href="#修行的目的" class="headerlink" title="修行的目的"></a>修行的目的</h3><p>修行是为了长生久视，不是为了纵横人间。<br>未完待续</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;最近刚刚读完了《神游》，记录一些笔记和自己的想法。&lt;br&gt;自己是读完《灵山》之后，被徐公子构建的仙侠世界所震撼，才开始继续读他的书《神游》的。&lt;br&gt;神游与其说是一本修仙小说，更像是一本都市小说，在神游的世界里，徐公子展示了世俗人与修行人是如何共同生活在现代化的世界里的。&lt;</summary>
      
    
    
    
    <category term="随笔" scheme="http://yeyuwenxi.github.io/categories/%E9%9A%8F%E7%AC%94/"/>
    
    
  </entry>
  
  <entry>
    <title>关于博客的搭建</title>
    <link href="http://yeyuwenxi.github.io/2021/03/29/guan-yu-bo-ke-de-da-jian/"/>
    <id>http://yeyuwenxi.github.io/2021/03/29/guan-yu-bo-ke-de-da-jian/</id>
    <published>2021-03-29T07:43:05.000Z</published>
    <updated>2021-03-30T08:21:40.131Z</updated>
    
    <content type="html"><![CDATA[<p>记录一些博客搭建过程中遇到的问题和各种bug</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;记录一些博客搭建过程中遇到的问题和各种bug&lt;/p&gt;
</summary>
      
    
    
    
    <category term="博客搭建" scheme="http://yeyuwenxi.github.io/categories/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/"/>
    
    
  </entry>
  
  <entry>
    <title>作为开始</title>
    <link href="http://yeyuwenxi.github.io/2021/03/28/zuo-wei-kai-shi/"/>
    <id>http://yeyuwenxi.github.io/2021/03/28/zuo-wei-kai-shi/</id>
    <published>2021-03-28T11:36:16.000Z</published>
    <updated>2021-03-31T07:47:53.042Z</updated>
    
    <content type="html"><![CDATA[<p>2021年3月28日，第0天。</p><p>写一些纷繁杂乱的念头，作为一个简单的开始。</p><h4 id="为什么开始这个博客"><a href="#为什么开始这个博客" class="headerlink" title="为什么开始这个博客"></a>为什么开始这个博客</h4><p>最近的生活相比之前悠闲了很多，但悠闲之后自己并没有把那些当初想做的事情做好。<br>自己并没有成为理想中的那个样子，反而因为悠闲而显得有些堕落，整天无所事事，面对生活不知所措。<br>那些当初忙碌时想做却没有去做的事情，闲下来之后自己同样也没有去做，有些事情，永远会因为各种原因而被拖延。<br>我想，这并不是当初的那个自己想要成为的模样吧。<br>在某种程度上，这就是背叛了初心吧，当初那个自己如果看到今天的模样，应该会很失望吧。<br>所以，我开始了这个博客，写一些东西，做一些改变，为了成为自己想要成为的模样而努力。<br>生而为人，不可避免地会有自身的局限性，人并不一定能成为自己想要成为的模样，但起码，人应该好好活，应该认真地去做一些有价值，有意义的事情。</p><h4 id="我要写些什么"><a href="#我要写些什么" class="headerlink" title="我要写些什么"></a>我要写些什么</h4><p>记录一些日常生活里的念头和事件，或者是感触和随笔，写一些自己的碎碎念，总结每一天的生活，作为反思，也作为勉励。<br>我不知道自己能坚持多久，也不敢确定这个过程是否真正的有价值。<br>但不管怎样，我开始了，我也希望能把这件事情坚持下去，并在这个过程中收获成长。<br>坚持从来都不是一件容易的事情，尤其是对我来说，自己好像总是会有一些各种各样，天马行空的念头和想法，但是往往又很少去实现这些想法，只是在想，却很少去做，我想这就是大家所说的执行力差吧，我一直以来好像都是一个执行力很差的人。<br>所以，我希望能够通过这件事情做一些改变，让自己静下心来，踏踏实实地做一些事情，去经历，去记录，去反思，去成长。</p><h4 id="后续更新"><a href="#后续更新" class="headerlink" title="后续更新"></a>后续更新</h4><p>毕竟这是一个博客，不是个人日记，所以接下来会尽可能地多写一些系统化的文章，少涉及自己个人的一些情绪。<br>希望自己能坚持每天开一篇新的文章，不一定要当天写完，但一定要每天写点有意义的话题。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;2021年3月28日，第0天。&lt;/p&gt;
&lt;p&gt;写一些纷繁杂乱的念头，作为一个简单的开始。&lt;/p&gt;
&lt;h4 id=&quot;为什么开始这个博客&quot;&gt;&lt;a href=&quot;#为什么开始这个博客&quot; class=&quot;headerlink&quot; title=&quot;为什么开始这个博客&quot;&gt;&lt;/a&gt;为什么开始这个</summary>
      
    
    
    
    <category term="心情日记" scheme="http://yeyuwenxi.github.io/categories/%E5%BF%83%E6%83%85%E6%97%A5%E8%AE%B0/"/>
    
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="http://yeyuwenxi.github.io/2021/03/28/hello-world/"/>
    <id>http://yeyuwenxi.github.io/2021/03/28/hello-world/</id>
    <published>2021-03-28T05:09:39.319Z</published>
    <updated>2021-03-28T05:09:39.319Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.io/docs/&quot;&gt;documentation&lt;/a&gt; for</summary>
      
    
    
    
    
  </entry>
  
</feed>
